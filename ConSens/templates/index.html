<!DOCTYPE html>
<html lang="es">
<head>
    {%load static%}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="OG:TITLE" content="ConSens">
    <meta name="OG:IMAGE" content="{%static 'img/logo.png'%}">
    <meta name="OG:description" content="Pagina dedicada al control de sensores (ConSens) creado por estudiantes de la UNC-FCEFyN">
    <title> ConSens </title>
    <link rel="icon" href="{%static 'img/logo.png'%}" type="image/png">
    <link rel="stylesheet" href="{%static 'css/styles.css'%}">
</head>

<body>
    <header>
        {% include "barra_nav.html"%}
    </header>
    
    <div id="tittle">
        Registro mas reciente de cada modulo
    </div>  

    <table class="tabla__index">
        <tr>
            <th class="tabla__item"><a href="?sort={% if sort == 'fecha' %}-fecha{% else %}fecha{% endif %}">Fecha</a></th>
            <th class="tabla__item"><a href="?sort={% if sort == 'hora' %}-hora{% else %}hora{% endif %}">Hora</a></th>
            <th class="tabla__item"><a href="?sort={% if sort == 'modulo' %}-modulo{% else %}modulo{% endif %}">M처dulo</a></th>
            <th class="tabla__item"><a href="?sort={% if sort == 'ubicacion' %}-ubicacion{% else %}ubicacion{% endif %}">Ubicaci처n</a></th>
            <th class="tabla__item"><a href="?sort={% if sort == 'temperatura' %}-temperatura{% else %}temperatura{% endif %}">Temperatura[째C]</a></th>
            <th class="tabla__item"><a href="?sort={% if sort == 'humedad' %}-humedad{% else %}humedad{% endif %}">Humedad[%]</a></th>
            <th class="tabla__item"><a href="?sort={% if sort == 'presion' %}-presion{% else %}presion{% endif %}">Presi처n[HPa]</a></th>
        </tr>

        {% for registro in ultimos_registros %}

        <tr>
            <td class="tabla__item">{{ registro.registro.fecha }}</td>
            <td class="tabla__item">{{ registro.registro.hora }}</td>
            <td class="tabla__item">{{ registro.registro.modulo.nombre }}</td>
            <td class="tabla__item">{{ registro.registro.ubicacion }}</td>
            <td class="tabla__item {% if registro.alerta.temp %}alerta{% endif %}">{{ registro.registro.temperatura }}</td>
            <td class="tabla__item {% if registro.alerta.hum %}alerta{% endif %}">{{ registro.registro.humedad }}</td>
            <td class="tabla__item {% if registro.alerta.pres %}alerta{% endif %}">{{ registro.registro.presion }}</td>
        </tr>

        {% endfor %}

    </table>
    <footer>
        
    </footer>
</body>
</html>